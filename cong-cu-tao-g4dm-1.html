<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text Area Example</title>
  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .container {
      height: 100vh;
      width: 100%;
      display: flex;
      flex-direction: row;
    }

    .input-section {
      width: 150px;
      display: flex;
      flex-direction: column;
    }

    .input-section button {
      margin-bottom: 10px;
    }

    .input-section textarea {
      flex-grow: 1;
      resize: vertical;
    }
    
    .output-section {
      flex-grow: 1;
      padding-left: 10px;
    }

    .output-section textarea {
      height: 100%;
      width: 100%;
      resize: both;
      font-size: 8pt;
      white-space: nowrap;
      /* Ngăn văn bản xuống dòng */
      overflow-x: auto;
      /* Bật thanh cuộn ngang nếu cần */
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="input-section">
      <button id="execute" class="btn btn-primary">Execute</button>
      <textarea id="input" class="form-control" rows="15">
NX=24
NY=25
NZ=1
DIRECTION=XYZ
DX=1,562
DY=1,562
DZ=6,5
---
460,2222222
466,6666667
460,6111111
422,6666667
394,5416667
377,7777778
371,7222222
382,6111111
377
345,1666667
334,4444444
332,9444444
327,8333333
332,7777778
340,8333333
340,2777778
343,9444444
351,3888889
350,6666667
357,3333333
372,2777778
386,7777778
398,7222222
421,1666667
451,2777778
440,4444444
441,4444444
424,9444444
392,8333333
361,7916667
339,5555556
342,0555556
354
343,3888889
339,4444444
344,8888889
337,8333333
322,5
312,1666667
316,8333333
319,7777778
325,5
330,5555556
319,8888889
314,3333333
331,3888889
352,0555556
370
379,8888889
396,1666667
419,3333333
410,9444444
399,5
368,1111111
344,875
332,7222222
340,4444444
331,3333333
334,2777778
344,7777778
346,6111111
346,5555556
335,4444444
307,2222222
291,9444444
290,4444444
297,3333333
304,6111111
306,8333333
297,4444444
299,2222222
317,0555556
344,3888889
361,4444444
369,2222222
409,0555556
398,3888889
391,1111111
355,8333333
334,75
326,1111111
346
346,8888889
343,2777778
342,7222222
342,1666667
328,8333333
329,1666667
316,6666667
308,7777778
308,2777778
309,2222222
306,4444444
308
308,3888889
309,9444444
312,3333333
319,6666667
328,6666667
338,7222222
398,5555556
399,3888889
383
341,5
309,5833333
308,2777778
334
334,6666667
333,9444444
334,9444444
327,7777778
314,1666667
318,6666667
318,6666667
323,8333333
328,9444444
336,3888889
338,4444444
324,5555556
319,8888889
326,9444444
315,6111111
311,9444444
314,6666667
323,1111111
375,5
379,3888889
343,2222222
306,8333333
292,4583333
296,9444444
311,1111111
322,5555556
322
310,0555556
298,2777778
299,5
301,6666667
296,1111111
300,7222222
313,6111111
331,5
345,6111111
336,5
325,5555556
316,6111111
307,3888889
301,7777778
314,8333333
328,5555556
333,1666667
322,2777778
294,2777778
281,7777778
275,25
274,3888889
287,9444444
311,4444444
304,7777778
273,8333333
263,7222222
261,1666667
249,4444444
254,1666667
270,8333333
304,7222222
323,8888889
318,1666667
306,9444444
306,5555556
301,7777778
296,5555556
290,1666667
303,1666667
320
301,3333333
265,2777778
267,3333333
273,2222222
262,8333333
269,3888889
296,3333333
323,3888889
306,8333333
280,6666667
274,8888889
259,2222222
235
240,0555556
272,1666667
298,3333333
310,4444444
304,7777778
304,2222222
298,1111111
285,1111111
285,1111111
289,3333333
292,4444444
300,6111111
297,8333333
259,5555556
272,6666667
289,7222222
277,5
292,4444444
317,6666667
339,5555556
317,9444444
307,8333333
300
280,8888889
275,2777778
279,0555556
282,7777778
289,3333333
294,1111111
296,9444444
311,6111111
304,2222222
285,6666667
274,8333333
281,8888889
286,4444444
300,6666667
307
302,6666667
292,0833333
298,0416667
302,625
301,9583333
298,6666667
292,9583333
317,7916667
327,8333333
317,2916667
315,7083333
315,6666667
315,6666667
312,7916667
308,875
309,3333333
315,7916667
316,5
308,6666667
296,0416667
280,7083333
274,75
288,9583333
297,6666667
317,6666667
327,3888889
330,0555556
301,9444444
311,3333333
306,6666667
267,8333333
277,4444444
304,1111111
305,8888889
305,7777778
324,2777778
337
343,9444444
336,7222222
334,4444444
326,2222222
298,8888889
278,5555556
285
294,3888889
286,2222222
272
287
311,9444444
348,4444444
350,5555556
352,6666667
313
326
306,1111111
261,5555556
274,7222222
280,6666667
269,1111111
289,7222222
325,7222222
346,4444444
348,8333333
349,6666667
337,2222222
305,1111111
288,2222222
281,7777778
280,6111111
286,7777778
285,8333333
285
286,6111111
316,0555556
366,7222222
385,0555556
353,0555556
331,3888889
365,5416667
313,1666667
291,3333333
291,6666667
269,1111111
260,7777778
313,6666667
328
313,2222222
298,0555556
302
294,8333333
279,7777778
293,1666667
297,1111111
296,6111111
300,5555556
298,9444444
291,9444444
297,0555556
302,5555556
336
347,4444444
336,2222222
354,4444444
385,0416667
309,1666667
299,5555556
285,6666667
262,5555556
250,7222222
277,9444444
303,3888889
302,5
281,5555556
267
254
275,8333333
303,5555556
321,4444444
322,9444444
315
307,1111111
298,5
295,6111111
291,3888889
338,6111111
328,0555556
322,9444444
354,2777778
337,875
310,1666667
307
276,1111111
263,7222222
258,2777778
256,0555556
252,9444444
293,7222222
333,3888889
322,7777778
304,8333333
325,4444444
343,2777778
354,8333333
339,4444444
322,7222222
314,4444444
310,0555556
299,2222222
295,9444444
368,6666667
356,6111111
318,5
341,2222222
325,625
313,3333333
300,5
257,2777778
237,2777778
271,5555556
280,5555556
265,6666667
333,1666667
416,7222222
384,3888889
355,0555556
370,3888889
370,7777778
353,8888889
339,2222222
326,2777778
318,2777778
308,1666667
302,7222222
309,6111111
396,6111111
371,9444444
332,0555556
313,8888889
314,25
329,5
339,9444444
313,1111111
268,7222222
310,5555556
332,5
347,8888889
367,5555556
405,7222222
368,5555556
359,3333333
373,2777778
366,1111111
347,0555556
332
310,8333333
307,6111111
311
314,2222222
317,9444444
371,6111111
338,5555556
296,3333333
316,1666667
352,6666667
384,0555556
437,7777778
471,3333333
440
416,3333333
436,6666667
459,1111111
383,6666667
346,7777778
330,6666667
337,5555556
357,6111111
379,5555556
348,6666667
304,7222222
299,5555556
311,7777778
315,7222222
321,1666667
312,1666667
350,1666667
298,5
268,7222222
289,3333333
323,6666667
293,4444444
403,0555556
478,5555556
424,7777778
378,7222222
392,5
415,2222222
347,3888889
305,7222222
319,3333333
328,2222222
359,1666667
378,5555556
350,8888889
299,9444444
282,1111111
299,3333333
304,7222222
313,1666667
320,1666667
338,5555556
297
249,8888889
272,4444444
235,2083333
217,9444444
321,1111111
353,8888889
300,3888889
299,6666667
311,2777778
316,7777778
331,9444444
335,8888889
346,5555556
369,5555556
419,3888889
378,6111111
314,6111111
285,8333333
271,4444444
287,3333333
301,5555556
310,7777778
325,3888889
316,2777778
303,5555556
266,0555556
283,7222222
225,2916667
254,2777778
300,5
283,8888889
254,7777778
282,1666667
265,5
295,0555556
384,2222222
373,1666667
358,2777778
374,9444444
386,8888889
337,5
294,3888889
283,7222222
285,8888889
295,3333333
313,2777778
320,8888889
331,1666667
316,0555556
290,3333333
263,9444444
299,8888889
259,375
271,3333333
315,0555556
265,5
231,4444444
277,4444444
278,7777778
329,3888889
390,7777778
387,7777778
379,6666667
373,8888889
355,1111111
331,3333333
324,4444444
312,2777778
313,7777778
323,4444444
329,2777778
328,9444444
332,7777778
354,4444444
287,6111111
272,0555556
294,8888889
262,625
268,8888889
320,3888889
298,3888889
308,8888889
294,6111111
321,2777778
355,6111111
410,3888889
415,8333333
397,3888889
403,5555556
400,7777778
376,9444444
349,2777778
334,8333333
337,2222222
338,2222222
335,1111111
330,8888889
338,6111111
355,6666667
311,1111111
279,5555556
291,3333333
287,5833333
273,1111111
281,6666667
338,0555556
336,5555556
255,7222222
293,5555556
336,3888889
403,4444444
425,1111111
419,2777778
418,7777778
419,5555556
402,1111111
368
362,9444444
355,9444444
343,2222222
342,5555556
341,6111111
340,9444444
            </textarea>
    </div>
    <div class="output-section">
      <textarea id="output" class="form-control"></textarea>
    </div>
  </div>

  <!-- jQuery, Lodash, and Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.20/lodash.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
  <script>
    function stringToFloat(str) {
      // Thay dấu phẩy bằng dấu chấm để có thể chuyển thành số float
      var normalizedStr = str.replace(',', '.');

      // Chuyển đổi chuỗi đã được chuẩn hoá thành số float
      var floatNumber = parseFloat(normalizedStr);

      // Trả về kết quả
      return floatNumber;
    }
    let vars = {};
    let data = Array()
    $(document).ready(function() {
      $('#execute').on('click', function() {
        var inputText = $('#input').val();
        var separateLines = inputText.split(/\r?\n|\r|\n/g);
        let varRead = true
        for (let line of separateLines) {
          line = line.trim()
          if (line.includes("---")) {
            varRead = false
            continue
          }

          if (varRead) {
            let keyValue = line.split("=")
            let key = keyValue[0]
            let value = keyValue[1]
            vars[key] = value
          } else {
            data.push(stringToFloat(line))
          }
        }
        let nx = parseInt(vars["NX"])
        let ny = parseInt(vars["NY"])
        let nz = parseInt(vars["NZ"])
        let matrix = Array()
        let datai = 0
        for (var xi = 0; xi < nx; xi++) {
          let arr_x = Array()
          for (var yi = 0; yi < ny; yi++) {
            let arr_y = Array()
            for (var zi = 0; zi < nz; zi++) {
              arr_y.push(data[datai++])
            }
            arr_x.push(arr_y)
          }
          matrix.push(arr_x)
        }

        let outLines = Array()

        for (var zi = 0; zi < nz; zi++) {
          for (var yi = 0; yi < ny; yi++) {
            let newLine = Array()
            for (var xi = 0; xi < nx; xi++) {
              newLine.push(matrix[xi][yi][zi])
            }
            let lines = newLine.join(" ")
            outLines.push(lines)
          }
        }

        $('#output').val(outLines.join("\n"));
      });

    });
  </script>
</body>

</html>